# ═══════════════════════════════════════════════════════════════════════════
# CSV Mapping: PSFH Sales Report Export
# ═══════════════════════════════════════════════════════════════════════════
# 
# For CSV exports from Local Food Connect (PSFH distributor portal)
# Adjust column names based on actual export format.
# ═══════════════════════════════════════════════════════════════════════════

name: psfh_sales
description: "PSFH/Local Food Connect sales report export"
source_type: csv

# CSV options
delimiter: ","
encoding: utf-8
skip_rows: 0
header_row: 0

# Row filtering
skip_patterns:
  - "^Total"
  - "^\\s*$"
  - "^Subtotal"

# Required columns
required_columns:
  - "Store"
  - "Product"
  - "Quantity"

# Column mappings
columns:
  # Store/Customer
  - source: "Store"
    target: customer
    type: string
    required: true

  - source: "Store"
    target: customer_raw
    type: string

  # Product
  - source: "Product"
    target: product
    type: string
    transform: uppercase
    required: true

  - source: "SKU"
    target: sku
    type: string

  # Quantities
  - source: "Quantity"
    target: quantity
    type: float
    required: true

  - source: "Unit"
    target: unit_type
    type: string
    transform: uppercase
    default: "EACH"

  # Pricing
  - source: "Unit Price"
    target: unit_price
    type: currency

  - source: "Total"
    target: line_total
    type: currency

  # Dates
  - source: "Order Date"
    target: order_date
    type: date
    format: "%m/%d/%Y"

  - source: "Delivery Date"
    target: delivery_date
    type: date
    format: "%m/%d/%Y"

  # Order reference
  - source: "Order #"
    target: order_number
    type: string

  - source: "PO #"
    target: po_number
    type: string

output_type: dict
